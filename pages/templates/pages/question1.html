<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8">
    <title>Question 1</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'question.css' %}">
    <link rel="stylesheet" href="{% static 'navbar.css' %}">
  </head>
  <body>
    {% include 'partials/navbar.html' %}
    <div class="container">
      <div class="context-box">
        <h1 class="titre-principal">🕵️ Mission : Déjoue l'attaque !</h1>

        {% if joueur_id == 1 %}
          <h2>Bienvenue Joueur 1</h2>
          <p>Indice 1 : Le monument est célèbre pour sa hauteur et sa lumière.</p>

        {% elif joueur_id == 2 %}
          <h2>Bienvenue Joueur 2</h2>
          <p>Indice 2 : La date est liée à un grand événement mondial.</p>

        {% elif joueur_id == 3 %}
          <h2>Bienvenue Joueur 3</h2>
          <p>Ta mission : trouve l’heure exacte de l’attaque.</p>
          <div class="calcul">
            ( Poids de la Tour Eiffel − Altitude du pont Cau Vang ) + 
            <div class="fraction">
              <span class="num">Habitants de Chiang Rai</span>
              <span class="den">10</span>
            </div>
          </div>
        {% endif %}

        <div class="reponse-box">
          <input type="text" id="reponse" name="reponse" placeholder="Ta réponse ici...">
          <button id="submit-reponse" class="btn-valider">Valider</button>
        </div>

        <div class="resultat" style="display:none;">🎉 Bravo, tu as réussi !</div>
        <div class="erreur" style="display:none;">❌ Mauvaise réponse, réessaie !</div>
      </div>

      <button class="bouton-aide">💡</button>

      <div id="popup-indice" class="popup" style="display:none;">
        <div class="popup-content">
          <span id="close-popup">&times;</span>
          <p>Utiliser ton indice ? (Tu n’en as qu’un seul !)</p>
          <button id="confirm-indice" class="btn-oui">Oui</button>
          <button id="cancel-indice" class="btn-non">Non</button>
        </div>
      </div>
      <div class="indice" style="display:none;">
        <p>Indice : </p>
      </div>
    </div>

    <script>
const helpBtn = document.querySelector('.bouton-aide');
const popup = document.getElementById('popup-indice');
const closePopup = document.getElementById('close-popup');
const confirmBtn = document.getElementById('confirm-indice');
const cancelBtn = document.getElementById('cancel-indice');
const indice = document.querySelector('.indice');

const submitBtn = document.getElementById('submit-reponse');
const reponse = document.getElementById('reponse');
const resultat = document.querySelector('.resultat');
const erreur = document.querySelector('.erreur');
const reponseBox = document.querySelector('.reponse-box');

// Ouvrir le popup d'aide
helpBtn.addEventListener('click', () => {
    popup.style.display = 'flex';
});

// Fermer le popup
closePopup.addEventListener('click', () => {
    popup.style.display = 'none';
});
cancelBtn.addEventListener('click', () => {
    popup.style.display = 'none';
});

// Confirmer l'utilisation de l'indice
confirmBtn.addEventListener('click', () => {
    indice.style.display = 'block';        // afficher l'indice
    helpBtn.disabled = true;               // désactiver le bouton d'aide
    helpBtn.style.opacity = 0.5;
    popup.style.display = 'none';          // fermer le popup
    reponseBox.style.display = 'block';    // afficher la zone de réponse après indice
});

</script>

  </body>
</html>